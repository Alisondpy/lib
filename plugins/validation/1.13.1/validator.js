define(function(t,e,n){"use strict";var a=t("jquery"),i=t("./validate"),r=/[A-Z]/g,u=function(t){return t.replace(r,function(t){return"-"+t.toLowerCase()})},s=a.isEmptyObject,o=function(t){var e=a(t).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]"),n={};return e.each(function(t,e){var i,r,o=e.ie||e.name,d=a(e).data(),l={};for(i in d)d.hasOwnProperty(i)&&(r=u(i))&&0===r.indexOf("validate-")&&d[i]&&(l[r.substring(9)]=d[i]);s(l)||(n[o]=l)}),n};i.validate=function(t,e){var n,r=a(t);if(r.is("form")||(r=r.find("form")),!r.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));n=r[0];var u=a(n).data("validator");return u?u:(r.attr("novalidate","novalidate"),e.messages=a.extend(!0,o(n),e.messages),u=new i(e,n),a(n).data("validator",u),u.settings.onsubmit&&(r.validateDelegate(":submit","click",function(t){u.settings.submitHandler&&(u.submitButton=t.target),a(t.target).hasClass("cancel")&&(u.cancelSubmit=!0),void 0!==a(t.target).attr("formnovalidate")&&(u.cancelSubmit=!0)}),r.submit(function(t){function e(){var e;return!u.settings.submitHandler||(u.submitButton&&(e=a('<input type="hidden" />').attr("name",u.submitButton.name).val(a(u.submitButton).val()).appendTo(u.currentForm)),u.settings.submitHandler.call(u,u.currentForm,t),u.submitButton&&e.remove(),!1)}return u.settings.debug&&t.preventDefault(),u.cancelSubmit?(u.cancelSubmit=!1,e()):u.form()?u.pendingRequest?(u.formSubmitted=!0,!1):e():(u.focusInvalid(),!1)})),u)},n.exports=i});