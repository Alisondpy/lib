var swfobject=function(){function e(){if(!N){try{var e=R.getElementsByTagName("body")[0].appendChild(R.createElement("span"));e.parentNode.removeChild(e)}catch(e){return}N=!0;for(var e=L.length,t=0;t<e;t++)L[t]()}}function t(e){N?e():L[L.length]=e}function i(e){if(typeof I.addEventListener!=U)I.addEventListener("load",e,!1);else if(typeof R.addEventListener!=U)R.addEventListener("load",e,!1);else if(typeof I.attachEvent!=U)c(I,"onload",e);else if("function"==typeof I.onload){var t=I.onload;I.onload=function(){t(),e()}}else I.onload=e}function s(){var e=R.getElementsByTagName("body")[0],t=R.createElement(F);t.setAttribute("type",w);var i=e.appendChild(t);if(i){var s=0;!function(){if(typeof i.GetVariable!=U){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),W.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(10>s)return s++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,a()}()}else a()}function a(){var e=O.length;if(0<e)for(var t=0;t<e;t++){var i=O[t].id,s=O[t].callbackFn,a={success:!1,id:i};if(0<W.pv[0]){var r=h(i);if(r)if(!f(O[t].swfVersion)||W.wk&&312>W.wk)if(O[t].expressInstall&&o()){a={},a.data=O[t].expressInstall,a.width=r.getAttribute("width")||"0",a.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(a.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(a.align=r.getAttribute("align"));for(var d={},r=r.getElementsByTagName("param"),p=r.length,c=0;c<p;c++)"movie"!=r[c].getAttribute("name").toLowerCase()&&(d[r[c].getAttribute("name")]=r[c].getAttribute("value"));l(a,d,i,s)}else u(r),s&&s(a);else m(i,!0),s&&(a.success=!0,a.ref=n(i),s(a))}else m(i,!0),s&&((i=n(i))&&typeof i.SetVariable!=U&&(a.success=!0,a.ref=i),s(a))}}function n(e){var t=null;return(e=h(e))&&"OBJECT"==e.nodeName&&(typeof e.SetVariable!=U?t=e:(e=e.getElementsByTagName(F)[0])&&(t=e)),t}function o(){return!x&&f("6.0.65")&&(W.win||W.mac)&&!(W.wk&&312>W.wk)}function l(e,t,i,s){x=!0,y=s||null,E={success:!1,id:i};var a=h(i);a&&("OBJECT"==a.nodeName?(b=r(a),v=null):(b=a,v=i),e.id=C,(typeof e.width==U||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==U||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),R.title=R.title.slice(0,47)+" - Flash Player Installation",s=W.ie&&W.win?"ActiveX":"PlugIn",s="MMredirectURL="+I.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+R.title,t.flashvars=typeof t.flashvars!=U?t.flashvars+("&"+s):s,W.ie&&W.win&&4!=a.readyState&&(s=R.createElement("div"),i+="SWFObjectNew",s.setAttribute("id",i),a.parentNode.insertBefore(s,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()),d(e,t,i))}function u(e){if(W.ie&&W.win&&4!=e.readyState){var t=R.createElement("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(r(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(r(e),e)}function r(e){var t=R.createElement("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else if((e=e.getElementsByTagName(F)[0])&&(e=e.childNodes))for(var i=e.length,s=0;s<i;s++)!(1==e[s].nodeType&&"PARAM"==e[s].nodeName)&&8!=e[s].nodeType&&t.appendChild(e[s].cloneNode(!0));return t}function d(e,t,i){var s,a=h(i);if(W.wk&&312>W.wk)return s;if(a)if(typeof e.id==U&&(e.id=i),W.ie&&W.win){var n,o="";for(n in e)e[n]!=Object.prototype[n]&&("data"==n.toLowerCase()?t.movie=e[n]:"styleclass"==n.toLowerCase()?o+=' class="'+e[n]+'"':"classid"!=n.toLowerCase()&&(o+=" "+n+'="'+e[n]+'"'));n="";for(var l in t)t[l]!=Object.prototype[l]&&(n+='<param name="'+l+'" value="'+t[l]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+n+"</object>",P[P.length]=e.id,s=h(e.id)}else{l=R.createElement(F),l.setAttribute("type",w);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?l.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&l.setAttribute(u,e[u]));for(o in t)t[o]!=Object.prototype[o]&&"movie"!=o.toLowerCase()&&(e=l,n=o,u=t[o],i=R.createElement("param"),i.setAttribute("name",n),i.setAttribute("value",u),e.appendChild(i));a.parentNode.replaceChild(l,a),s=l}return s}function p(e){var t=h(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){if(4==t.readyState){var i=h(e);if(i){for(var s in i)"function"==typeof i[s]&&(i[s]=null);i.parentNode.removeChild(i)}}else setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function h(e){var t=null;try{t=R.getElementById(e)}catch(e){}return t}function c(e,t,i){e.attachEvent(t,i),A[A.length]=[e,t,i]}function f(e){var t=W.pv;return e=e.split("."),e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)||0,e[2]=parseInt(e[2],10)||0,t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>=e[2]}function _(e,t,i,s){if(!W.ie||!W.mac){var a=R.getElementsByTagName("head")[0];a&&(i=i&&"string"==typeof i?i:"screen",s&&(D=S=null),S&&D==i||(s=R.createElement("style"),s.setAttribute("type","text/css"),s.setAttribute("media",i),S=a.appendChild(s),W.ie&&W.win&&typeof R.styleSheets!=U&&0<R.styleSheets.length&&(S=R.styleSheets[R.styleSheets.length-1]),D=i),W.ie&&W.win?S&&typeof S.addRule==F&&S.addRule(e,t):S&&typeof R.createTextNode!=U&&S.appendChild(R.createTextNode(e+" {"+t+"}")))}}function m(e,t){if(k){var i=t?"visible":"hidden";N&&h(e)?h(e).style.visibility=i:_("#"+e,"visibility:"+i)}}function g(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=U?encodeURIComponent(e):e}var b,v,y,E,S,D,U="undefined",F="object",w="application/x-shockwave-flash",C="SWFObjectExprInst",I=window,R=document,q=navigator,T=!1,L=[function(){T?s():a()}],O=[],P=[],A=[],N=!1,x=!1,k=!0,W=function(){var e=typeof R.getElementById!=U&&typeof R.getElementsByTagName!=U&&typeof R.createElement!=U,t=q.userAgent.toLowerCase(),i=q.platform.toLowerCase(),s=i?/win/.test(i):/win/.test(t),i=i?/mac/.test(i):/mac/.test(t),t=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,n=[0,0,0],o=null;if(typeof q.plugins!=U&&typeof q.plugins["Shockwave Flash"]==F)!(o=q.plugins["Shockwave Flash"].description)||typeof q.mimeTypes!=U&&q.mimeTypes[w]&&!q.mimeTypes[w].enabledPlugin||(T=!0,a=!1,o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),n[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10),n[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10),n[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof I.ActiveXObject!=U)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&(o=l.GetVariable("$version"))&&(a=!0,o=o.split(" ")[1].split(","),n=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}catch(e){}return{w3:e,pv:n,wk:t,ie:a,win:s,mac:i}}();return function(){W.w3&&((typeof R.readyState!=U&&"complete"==R.readyState||typeof R.readyState==U&&(R.getElementsByTagName("body")[0]||R.body))&&e(),N||(typeof R.addEventListener!=U&&R.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(R.attachEvent("onreadystatechange",function(){"complete"==R.readyState&&(R.detachEvent("onreadystatechange",arguments.callee),e())}),I==top&&function(){if(!N){try{R.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),W.wk&&function(){N||(/loaded|complete/.test(R.readyState)?e():setTimeout(arguments.callee,0))}(),i(e)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=A.length,t=0;t<e;t++)A[t][0].detachEvent(A[t][1],A[t][2]);for(e=P.length,t=0;t<e;t++)p(P[t]);for(var i in W)W[i]=null;W=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}(),{registerObject:function(e,t,i,s){if(W.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=i,a.callbackFn=s,O[O.length]=a,m(e,!1)}else s&&s({success:!1,id:e})},getObjectById:function(e){if(W.w3)return n(e)},embedSWF:function(e,i,s,a,n,u,r,p,h,c){var _={success:!1,id:i};W.w3&&!(W.wk&&312>W.wk)&&e&&i&&s&&a&&n?(m(i,!1),t(function(){s+="",a+="";var t={};if(h&&typeof h===F)for(var g in h)t[g]=h[g];if(t.data=e,t.width=s,t.height=a,g={},p&&typeof p===F)for(var b in p)g[b]=p[b];if(r&&typeof r===F)for(var v in r)g.flashvars=typeof g.flashvars!=U?g.flashvars+("&"+v+"="+r[v]):v+"="+r[v];if(f(n))b=d(t,g,i),t.id==i&&m(i,!0),_.success=!0,_.ref=b;else{if(u&&o())return t.data=u,void l(t,g,i,c);m(i,!0)}c&&c(_)})):c&&c(_)},switchOffAutoHideShow:function(){k=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:f,createSWF:function(e,t,i){if(W.w3)return d(e,t,i)},showExpressInstall:function(e,t,i,s){W.w3&&o()&&l(e,t,i,s)},removeSWF:function(e){W.w3&&p(e)},createCSS:function(e,t,i,s){W.w3&&_(e,t,i,s)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=R.location.search||R.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return g(t);for(var t=t.split("&"),i=0;i<t.length;i++)if(t[i].substring(0,t[i].indexOf("="))==e)return g(t[i].substring(t[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(x){var e=h(C);e&&b&&(e.parentNode.replaceChild(b,e),v&&(m(v,!0),W.ie&&W.win&&(b.style.display="block")),y&&y(E)),x=!1}}}}(),SWFUpload=window.SWFUpload;void 0==SWFUpload&&(window.SWFUpload=SWFUpload=function(e){this.initSWFUpload(e)}),function(b){b.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+b.movieCount++,this.movieElement=null,b.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(e){throw delete b.instances[this.movieName],e}},b.instances={},b.movieCount=0,b.version="2.2.0 2009-03-25",b.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},b.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},b.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},b.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},b.CURSOR={ARROW:-1,HAND:-2},b.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},b.completeURL=function(e){if(!e)return"";if("string"!=typeof e||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=window.location.pathname.lastIndexOf("/");return path=0>=t?"/":window.location.pathname.substr(0,t)+"/",path+e},b.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=void 0==this.settings[e]?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",b.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",b.CURSOR.ARROW),this.ensureDefault("button_window_mode",b.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(0>this.settings.flash_url.indexOf("?")?"?":"&")+"ts="+ +new Date),this.settings.preserve_relative_urls||(this.settings.upload_url=b.completeURL(this.settings.upload_url),this.settings.button_image_url=this.settings.button_image_url?b.completeURL(this.settings.button_image_url):this.settings.button_image_url),delete this.ensureDefault},b.prototype.loadFlash=function(){var e,t;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==e)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},b.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.settings.flash_url,'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},b.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},b.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},b.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i.toString())+"="+encodeURIComponent(e[i].toString()));return t.join("&amp;")},b.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;if((e=this.getMovieElement())&&"unknown"==typeof e.CallFunction){for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(e){}try{e.parentNode.removeChild(e)}catch(e){}}return window[this.movieName]=null,b.instances[this.movieName]=null,delete b.instances[this.movieName],this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null,!0}catch(e){return!1}},b.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",b.version,"\nMovie Name: ",this.movieName,"\nSettings:\n    upload_url:               ",this.settings.upload_url,"\n    flash_url:                ",this.settings.flash_url,"\n use_query_string:         ",this.settings.use_query_string.toString(),"\n   requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n   http_success:             ",this.settings.http_success.join(", "),"\n   assume_success_timeout:   ",this.settings.assume_success_timeout,"\n    file_post_name:           ",this.settings.file_post_name,"\n    post_params:              ",this.settings.post_params.toString(),"\n    file_types:               ",this.settings.file_types,"\n    file_types_description:   ",this.settings.file_types_description,"\n    file_size_limit:          ",this.settings.file_size_limit,"\n   file_upload_limit:        ",this.settings.file_upload_limit,"\n file_queue_limit:         ",this.settings.file_queue_limit,"\n  debug:                    ",this.settings.debug.toString(),"\n  prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n    button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n  button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n    button_image_url:         ",this.settings.button_image_url.toString(),"\n   button_width:             ",this.settings.button_width.toString(),"\n   button_height:            ",this.settings.button_height.toString(),"\n  button_text:              ",this.settings.button_text.toString(),"\n    button_text_style:        ",this.settings.button_text_style.toString(),"\n  button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n    button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n   button_action:            ",this.settings.button_action.toString(),"\n  button_disabled:          ",this.settings.button_disabled.toString(),"\n    custom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n   swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n    file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n   file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n    upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n    upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n    upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n  upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},b.prototype.addSetting=function(e,t,i){return void 0==t?this.settings[e]=i:this.settings[e]=t},b.prototype.getSetting=function(e){return void 0!=this.settings[e]?this.settings[e]:""},b.prototype.callFlash=function(a,c){c=c||[];var b=this.getMovieElement(),e,f;try{f=b.CallFunction('<invoke name="'+a+'" returntype="javascript">'+__flash__argumentsToXML(c,0)+"</invoke>"),e=eval(f)}catch(e){throw"Call to "+a+" failed"}return void 0!=e&&"object"==typeof e.post&&(e=this.unescapeFilePostParams(e)),e},b.prototype.selectFile=function(){this.callFlash("SelectFile")},b.prototype.selectFiles=function(){this.callFlash("SelectFiles")},b.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},b.prototype.cancelUpload=function(e,t){!1!==t&&(t=!0),this.callFlash("CancelUpload",[e,t])},b.prototype.stopUpload=function(){this.callFlash("StopUpload")},b.prototype.getStats=function(){return this.callFlash("GetStats")},b.prototype.setStats=function(e){this.callFlash("SetStats",[e])},b.prototype.getFile=function(e){return"number"==typeof e?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},b.prototype.addFileParam=function(e,t,i){return this.callFlash("AddFileParam",[e,t,i])},b.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},b.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},b.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},b.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},b.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},b.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},b.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},b.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},b.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},b.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},b.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},b.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},b.prototype.setHTTPSuccess=function(e){"string"==typeof e&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},b.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},b.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},b.prototype.setButtonImageURL=function(e){void 0==e&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},b.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var i=this.getMovieElement();void 0!=i&&(i.style.width=e+"px",i.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},b.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},b.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},b.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},b.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},b.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},b.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},b.prototype.queueEvent=function(e,t){void 0==t?t=[]:t instanceof Array||(t=[t]);var i=this;if("function"==typeof this.settings[e])this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){i.executeNextEvent()},0);else if(null!==this.settings[e])throw"Event handler "+e+" is unknown or is not a function"},b.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;"function"==typeof e&&e.apply(this)},b.prototype.unescapeFilePostParams=function(e){var t,i=/[$]([0-9a-f]{4})/i,s={};if(void 0!=e){for(var a in e.post)if(e.post.hasOwnProperty(a)){t=a;for(var n;null!==(n=i.exec(t));)t=t.replace(n[0],String.fromCharCode(parseInt("0x"+n[1],16)));s[t]=e.post[a]}e.post=s}return e},b.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},b.prototype.flashReady=function(){var e=this.getMovieElement();e?(this.cleanUp(e),this.queueEvent("swfupload_loaded_handler")):this.debug("Flash called back ready but the flash movie can't be found.")},b.prototype.cleanUp=function(e){try{if(this.movieElement&&"unknown"==typeof e.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(e){}}}catch(e){}window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(e){}}},b.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},b.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},b.prototype.fileQueueError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,i])},b.prototype.fileDialogComplete=function(e,t,i){this.queueEvent("file_dialog_complete_handler",[e,t,i])},b.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},b.prototype.returnUploadStart=function(e){var t;if("function"==typeof this.settings.upload_start_handler)e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===t&&(t=!0),this.callFlash("ReturnUploadStart",[!!t])},b.prototype.uploadProgress=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,i])},b.prototype.uploadError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,i])},b.prototype.uploadSuccess=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,i])},b.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},b.prototype.debug=function(e){this.queueEvent("debug_handler",e)},b.prototype.debugMessage=function(e){if(this.settings.debug){var t=[];if("object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message){for(var i in e)e.hasOwnProperty(i)&&t.push(i+": "+e[i]);e=t.join("\n")||"",t=e.split("\n"),e="EXCEPTION: "+t.join("\nEXCEPTION: ")}b.Console.writeLine(e)}},b.Console={},b.Console.writeLine=function(e){var t,i;try{t=document.getElementById("SWFUpload_Console"),t||(i=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(i),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",i.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(e){alert("Exception: "+e.name+" Message: "+e.message)}}}(SWFUpload),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):e.returnExports=t(jQuery)}(this,function(e){"use strict";function t(t,s,a){var n=this;l(n,t),e.each(i,function(e,s){i.hasOwnProperty(e)&&(n[e]=function(e){return s.apply(t,arguments)})}),n.init(s,a);var o=t.data("uploadify");return o?(n.swfUpload=o,void(n.settings=o.settings)):void setTimeout(function(){var e={message:"Uploader installation error."};n.emit("setupError",[t,e])},1)}var i={init:function(i,a){return this.each(function(){var n=e(this),o=n.clone(),l=e.extend({id:n.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:!0,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:!1,debug:!1,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,itemTemplate:!1,method:"post",multi:!0,formData:{},preventCaching:!0,progressData:"percentage",queueID:!1,queueSizeLimit:999,removeCompleted:!0,removeTimeout:3,requeueErrors:!1,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},i),u={assume_success_timeout:l.successTimeout,button_placeholder_id:l.id,button_width:l.width,button_height:l.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:l.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:!1,button_cursor:"arrow"==l.buttonCursor?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:l.debug,requeue_on_error:l.requeueErrors,file_post_name:l.fileObjName,file_size_limit:l.fileSizeLimit,file_types:l.fileTypeExts,file_types_description:l.fileTypeDesc,file_queue_limit:l.queueSizeLimit,file_upload_limit:l.uploadLimit,flash_url:l.swf,prevent_swf_caching:l.preventCaching,post_params:l.formData,upload_url:l.uploader,use_query_string:"get"==l.method,file_dialog_complete_handler:s.onDialogClose,file_dialog_start_handler:s.onDialogOpen,file_queued_handler:s.onSelect,file_queue_error_handler:s.onSelectError,swfupload_loaded_handler:l.onSWFReady,upload_complete_handler:s.onUploadComplete,upload_error_handler:s.onUploadError,upload_progress_handler:s.onUploadProgress,upload_start_handler:s.onUploadStart,upload_success_handler:s.onUploadSuccess};a&&(u=e.extend(u,a)),u=e.extend(u,l);var r=swfobject.getFlashPlayerVersion(),d=r.major>=9;if(d){var p=l.id,h=e("#"+p),c=e('<div class="uploadify"><div class="uploadify-button-wrapper"></div></div>');h.before(c);var f=e("<div />",{id:p+"-button",class:["uploadify-button",l.buttonClass].join(" ")});l.buttonImage&&f.css({"background-image":"url("+l.buttonImage+")","text-indent":"-9999px"}),f.html('<span class="uploadify-button-text">'+l.buttonText+"</span>").css({height:l.height+"px",width:l.width+"px","line-height":l.height+"px"});var _=c.find(".uploadify-button-wrapper");_.append(f);var m={width:f.outerWidth(),height:f.outerHeight(),position:"relative"};_.css(m),f.append(h);var g=new SWFUpload(e.extend(u,{button_width:m.width,button_height:m.height}));if(n.data("uploadify",g),c.attr("id",p).data("uploadify",g).delegate(".cancel a","click",function(i){var s=e(i.target).data("file-id");s&&t.call(p,"cancel",s)}),!l.queueID){var b=p+"-queue",v=e('<div id="'+b+'" class="uploadify-queue" />');c.append(v),g.settings.queueID=b,g.settings.defaultQueue=!0}g.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"},g.original=o,g.wrapper=c,g.button=f,g.queue=v,l.onInit&&l.onInit.call(n,g)}else l.onFallback&&l.onFallback.call(n)})},cancel:function(t,i){var s=arguments;this.each(function(){var t=e(this),i=t.data("uploadify"),a=i.settings,n=-1;if(s[0])if("*"==s[0]){var o=i.queueData.queueLength;e("#"+a.queueID).find(".uploadify-queue-item").each(function(){n++,s[1]===!0?i.cancelUpload(e(this).attr("id"),!1):i.cancelUpload(e(this).attr("id")),
e(this).find(".data").removeClass("data").html(" - Cancelled"),e(this).find(".uploadify-progress-bar").remove(),e(this).delay(1e3+100*n).fadeOut(500,function(){e(this).remove()})}),i.queueData.queueSize=0,i.queueData.queueLength=0,a.onClearQueue&&a.onClearQueue.call(t,o)}else for(var l=0;l<s.length;l++)i.cancelUpload(s[l]),e("#"+s[l]).find(".data").removeClass("data").html(" - Cancelled"),e("#"+s[l]).find(".uploadify-progress-bar").remove(),e("#"+s[l]).delay(1e3+100*l).fadeOut(500,function(){e(this).remove()});else{var u=e("#"+a.queueID).find(".uploadify-queue-item").get(0);$item=e(u),i.cancelUpload($item.attr("id")),$item.find(".data").removeClass("data").html(" - Cancelled"),$item.find(".uploadify-progress-bar").remove(),$item.delay(1e3).fadeOut(500,function(){e(this).remove()})}})},destroy:function(){this.each(function(){var t=e(this),i=t.data("uploadify"),s=i.settings;i.destroy(),s.defaultQueue&&e("#"+s.queueID).remove(),e("#"+s.id).replaceWith(i.original),s.onDestroy&&s.onDestroy.call(this),i=null})},disable:function(t){this.each(function(){var i=e(this),s=i.data("uploadify"),a=s.settings;t?(s.button.addClass("disabled"),a.onDisable&&a.onDisable.call(this)):(s.button.removeClass("disabled"),a.onEnable&&a.onEnable.call(this)),s.setButtonDisabled(t)})},settings:function(t,i,s){var a=arguments,n=i;if(this.each(function(){var o=e(this),l=o.data("uploadify"),u=l.settings;if("object"==typeof a[0])for(var r in i)setData(r,i[r]);if(1===a.length)n=u[t];else{switch(t){case"uploader":l.setUploadURL(i);break;case"formData":s||(i=e.extend(u.formData,i)),l.setPostParams(u.formData);break;case"method":"get"==i?l.setUseQueryString(!0):l.setUseQueryString(!1);break;case"fileObjName":l.setFilePostName(i);break;case"fileTypeExts":l.setFileTypes(i,u.fileTypeDesc);break;case"fileTypeDesc":l.setFileTypes(u.fileTypeExts,i);break;case"fileSizeLimit":l.setFileSizeLimit(i);break;case"uploadLimit":l.setFileUploadLimit(i);break;case"queueSizeLimit":l.setFileQueueLimit(i);break;case"buttonImage":l.button.css("background-image",settingValue);break;case"buttonCursor":"arrow"==i?l.setButtonCursor(SWFUpload.CURSOR.ARROW):l.setButtonCursor(SWFUpload.CURSOR.HAND);break;case"buttonText":e("#"+u.id+"-button").find(".uploadify-button-text").html(i);break;case"width":l.setButtonDimensions(i,u.height);break;case"height":l.setButtonDimensions(u.width,i);break;case"multi":i?l.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES):l.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}u[t]=i}}),1===a.length)return n},stop:function(){this.each(function(){var t=e(this),i=t.data("uploadify");i.queueData.averageSpeed=0,i.queueData.uploadSize=0,i.queueData.bytesUploaded=0,i.queueData.uploadQueue=[],i.stopUpload()})},upload:function(){var t=arguments;this.each(function(){var i=e(this),s=i.data("uploadify");if(s.queueData.averageSpeed=0,s.queueData.uploadSize=0,s.queueData.bytesUploaded=0,s.queueData.uploadQueue=[],t[0])if("*"==t[0])s.queueData.uploadSize=s.queueData.queueSize,s.queueData.uploadQueue.push("*"),s.startUpload();else{for(var a=0;a<t.length;a++)s.queueData.uploadSize+=s.queueData.files[t[a]].size,s.queueData.uploadQueue.push(t[a]);s.startUpload(s.queueData.uploadQueue.shift())}else s.startUpload()})}},s={onDialogOpen:function(){var e=this.settings;this.queueData.errorMsg="文件上传错误:",this.queueData.filesReplaced=0,this.queueData.filesCancelled=0,e.onDialogOpen&&e.onDialogOpen.call(this)},onDialogClose:function(i,s,a){var n=this.settings;this.queueData.filesErrored=i-s,this.queueData.filesSelected=i,this.queueData.filesQueued=s-this.queueData.filesCancelled,this.queueData.queueLength=a,e.inArray("onDialogClose",n.overrideEvents)<0&&this.queueData.filesErrored>0&&(n.onNativeError?n.onNativeError.call(this,this.queueData.errorMsg):alert(this.queueData.errorMsg)),n.onDialogClose&&n.onDialogClose.call(this,this.queueData),n.auto&&t.call(n.id,"upload","*")},onSelect:function(t){var i=this.settings,s={};for(var a in this.queueData.files)if(s=this.queueData.files[a],1!=s.uploaded&&s.name==t.name){var n=confirm('The file named "'+t.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?');if(!n)return this.cancelUpload(t.id),this.queueData.filesCancelled++,!1;e("#"+s.id).remove(),this.cancelUpload(s.id),this.queueData.filesReplaced++}var o=Math.round(t.size/1024),l="KB";o>1e3&&(o=Math.round(o/1e3),l="MB");var u=o.toString().split(".");o=u[0],u.length>1&&(o+="."+u[1].substr(0,2)),o+=l;var r=t.name;r.length>25&&(r=r.substr(0,25)+"...");var d={fileID:t.id,instanceID:i.id,fileName:r,fileSize:o};if(0==i.itemTemplate&&(i.itemTemplate=['<div id="${fileID}" class="uploadify-queue-item">','<div class="cancel">','<a href="javascript:;" data-file-id="${fileID}">X</a>',"</div>",'<span class="fileName">${fileName} (${fileSize})</span><span class="data"></span>','<div class="uploadify-progress">','<div class="uploadify-progress-bar"><!--Progress Bar--></div>',"</div>","</div>"].join("")),e.inArray("onSelect",i.overrideEvents)<0){var p=i.itemTemplate;for(var h in d)p=p.replace(new RegExp("\\$\\{"+h+"\\}","g"),d[h]);e("#"+i.queueID).append(p)}this.queueData.queueSize+=t.size,this.queueData.files[t.id]=t,i.onSelect&&i.onSelect.apply(this,arguments)},onSelectError:function(t,i,s){var a=this.settings;if(e.inArray("onSelectError",a.overrideEvents)<0)switch(i){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:a.queueSizeLimit>s?this.queueData.errorMsg+="\nThe number of files selected exceeds the remaining upload limit ("+s+").":this.queueData.errorMsg+="\nThe number of files selected exceeds the queue size limit ("+a.queueSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\n文件"'+t.name+'" 超出大小限制 ('+a.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\n文件 "'+t.name+'" 是空文件.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\n文件 "'+t.name+'" 格式不符合要求 ('+a.fileTypeDesc+")."}i!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&delete this.queueData.files[t.id],a.onSelectError&&a.onSelectError.apply(this,arguments)},onQueueComplete:function(){this.settings.onQueueComplete&&this.settings.onQueueComplete.call(this,this.settings.queueData)},onUploadComplete:function(t){var i=this.settings,s=this,a=this.getStats();if(this.queueData.queueLength=a.files_queued,"*"==this.queueData.uploadQueue[0]?this.queueData.queueLength>0?this.startUpload():(this.queueData.uploadQueue=[],i.onQueueComplete&&i.onQueueComplete.call(this,this.queueData)):this.queueData.uploadQueue.length>0?this.startUpload(this.queueData.uploadQueue.shift()):(this.queueData.uploadQueue=[],i.onQueueComplete&&i.onQueueComplete.call(this,this.queueData)),e.inArray("onUploadComplete",i.overrideEvents)<0)if(i.removeCompleted)switch(t.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){e("#"+t.id)&&(s.queueData.queueSize-=t.size,s.queueData.queueLength-=1,delete s.queueData.files[t.id],e("#"+t.id).fadeOut(500,function(){e(this).remove()}))},1e3*i.removeTimeout);break;case SWFUpload.FILE_STATUS.ERROR:i.requeueErrors||setTimeout(function(){e("#"+t.id)&&(s.queueData.queueSize-=t.size,s.queueData.queueLength-=1,delete s.queueData.files[t.id],e("#"+t.id).fadeOut(500,function(){e(this).remove()}))},1e3*i.removeTimeout)}else t.uploaded=!0;i.onUploadComplete&&i.onUploadComplete.call(this,t)},onUploadError:function(t,i,s){var a=this.settings,n="Error";switch(i){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:n="HTTP Error ("+s+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:n="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:n="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:n="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+s+")."),n="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:n="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:n="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:n="Cancelled",this.queueData.queueSize-=t.size,this.queueData.queueLength-=1,(t.status==SWFUpload.FILE_STATUS.IN_PROGRESS||e.inArray(t.id,this.queueData.uploadQueue)>=0)&&(this.queueData.uploadSize-=t.size),a.onCancel&&a.onCancel.call(this,t),delete this.queueData.files[t.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:n="Stopped"}e.inArray("onUploadError",a.overrideEvents)<0&&(i!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&i!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED&&e("#"+t.id).addClass("uploadify-error"),e("#"+t.id).find(".uploadify-progress-bar").css("width","1px"),i!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&t.status!=SWFUpload.FILE_STATUS.COMPLETE&&e("#"+t.id).find(".data").html(" - "+n));var o=this.getStats();this.queueData.uploadsErrored=o.upload_errors,a.onUploadError&&a.onUploadError.call(this,t,i,s,n)},onUploadProgress:function(t,i,s){var a=this.settings,n=new Date,o=n.getTime(),l=o-this.timer;l>500&&(this.timer=o);var u=i-this.bytesLoaded;this.bytesLoaded=i;var r=this.queueData.queueBytesUploaded+i,d=Math.round(i/s*100),p="KB/s",h=0,c=u/1024/(l/1e3);c=Math.floor(10*c)/10,this.queueData.averageSpeed>0?this.queueData.averageSpeed=Math.floor((this.queueData.averageSpeed+c)/2):this.queueData.averageSpeed=Math.floor(c),c>1e3&&(h=.001*c,this.queueData.averageSpeed=Math.floor(h),p="MB/s"),e.inArray("onUploadProgress",a.overrideEvents)<0&&("percentage"==a.progressData?e("#"+t.id).find(".data").html(" - "+d+"%"):"speed"==a.progressData&&l>500&&e("#"+t.id).find(".data").html(" - "+this.queueData.averageSpeed+p),e("#"+t.id).find(".uploadify-progress-bar").css("width",d+"%")),a.onUploadProgress&&a.onUploadProgress.call(this,t,i,s,r,this.queueData.uploadSize)},onUploadStart:function(t){var i=this.settings,s=new Date;this.timer=s.getTime(),this.bytesLoaded=0,0==this.queueData.uploadQueue.length&&(this.queueData.uploadSize=t.size),i.checkExisting&&e.ajax({type:"POST",async:!1,url:i.checkExisting,data:{filename:t.name},success:function(i){if(1==i){var s=confirm('A file with the name "'+t.name+'" already exists on the server.\nWould you like to replace the existing file?');s||(this.cancelUpload(t.id),e("#"+t.id).remove(),this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0&&("*"==this.queueData.uploadQueue[0]?this.startUpload():this.startUpload(this.queueData.uploadQueue.shift())))}}}),i.onUploadStart&&i.onUploadStart.call(this,t)},onUploadSuccess:function(t,i,s){var a=this.settings,n=this.getStats();this.queueData.uploadsSuccessful=n.successful_uploads,this.queueData.queueBytesUploaded+=t.size,e.inArray("onUploadSuccess",a.overrideEvents)<0&&e("#"+t.id).find(".data").html(" - Complete");try{i=e.parseJSON(i)}catch(e){}a.onUploadSuccess&&a.onUploadSuccess.call(this,t,i,s)}},a=[].slice,n=65536*(1+Math.random())|0,o=function(e){return e=e||"",e+(++n).toString(32)},l=function(t,i){return t=t||{},i=i||e("<b />"),e.each({on:"on",un:"off",emit:"trigger"},function(e,s){t[e]=function(){return i[s].apply(i,arguments)}}),t};t.prototype={reset:function(){},showPreview:function(t){var i,s,a,n=this,o=n.settings;return a=e("#"+o.id),i=a.find(".uploadify-preview"),i.length||(i=e('<div class="uploadify-preview"><a href="#">X</a></div>').hide(),i.delegate("a","click",function(e){e.preventDefault(),i.hide(),n.emit("imageRemoved")}).appendTo(a)),t?(s=i.find("img"),s.length||(s=e('<img node-type="preview" src="'+t+'" />'),s.on("load",function(){i.show()}).appendTo(i)),s.attr("src",t),i.show()):i.hide(),this}},t.call=function(t,s){return"string"==typeof t&&(t=e("#"+t)),t[0]&&i[s]?i[s].apply(t,a.call(arguments,2)):void e.error("The method "+s+" does not exist in `uploadify`")};var u={uploadify:function(i,s){var a=e(i),n=a[0];if(!n)throw Error("Initialize uploadify error, invalid holder node.");if(n.id||(n.id=o("__file__")),"object"!=typeof s&&s)return t.call.apply(null,arguments);var l,u=e.extend({},s),r=arguments[2]||{},d=u.showPreview;delete u.showPreview;var p=u.onUploadSuccess;u.onUploadSuccess=function(e,t,i){d&&l.showPreview((t.data||0).url),p?p.apply(this,arguments):+t.error?(l.cancel(e.id),l.emit("error",[e,t])):l.emit("uploadSuccess",[e,t,i])};var h=u.onUploadError;u.onUploadError=function(e,t,i,s){var a={error:t,msg:i,data:s};h&&h.apply(this,arguments),l.emit("error",[e,a])};u.onDestroy;return u.onDestroy=function(){a.off(),a=null},l=new t(a,u,r)}};return u});