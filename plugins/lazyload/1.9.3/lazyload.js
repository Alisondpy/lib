!function(t,e,n){"function"==typeof define&&define.amd?define(["jquery"],n):t[e]=n(t.jQuery||t.Zepto)}(this,"Lazyload",function(t,e){"use strict";if(!t)throw"Error: jquery api not implements.";var n=t.each,i=function(t,e){if(t instanceof Array&&t.filter)return t.filter(e);for(var n=[],i=-1,r=t.length;++i<r;)e(t[i],i)&&n.push(t[i]);return n},r=function(t,e,n,i){var r;return function(){var o=i||this,f=arguments,a=function(){r=null,n||t.apply(o,f)},l=n&&!r;clearTimeout(r),r=setTimeout(a,e),l&&t.apply(o,f)}},o=function(e,n){e=e||{};var i=t(e),r=Array.prototype.slice;return n=n||e.name,t.each({on:"on",un:"off",once:"one",emit:"trigger"},function(t,o){e[t]=function(e){var f=r.call(arguments,0),a=f[1];return n&&!~e.indexOf(".")&&(f[0]=e+"."+n),"function"==typeof a&&("on"===t||"once"===t?f[1]=a.__||(a.__=function(t){return t.preventDefault(),a.apply(this,r.call(arguments,1))}):"un"===t&&(f[1]=a.__)),i[o].apply(i,f)}}),e},f=window,a=t(f),l=f.Image,u=/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion),s="__lazy_status__",c=0,p=1,d=2,h=function(t){return t[s]===e},A=function(){var t={},e=function(e,n){"function"==typeof n&&(t[e]=n)},n=function(e){return t[e]};return{define:e,get:n}}();A.define("image",function(n,i,r,o){if(!i)return void o("error");var f=new l,a=function(){f.onload=f.onerror=null,f=i=n=o=a=e};f.onload=function(){var e=t(n),f=r.effect;"function"!=typeof e[f]&&(f="show"),e.hide(),"IMG"===n.nodeName.toUpperCase()?e.attr("src",i):e.css("background-image",'url("'+i+'")'),e[f](r.effectSpeed),o(null,"load"),a()},f.onerror=function(t){o(t),a()},f.src=i}),A.define("html",function(t,e,n,i){i()});var v=function(e,l){l=l||{},e=t(e);var v=this,w={type:"image",threshold:50,failureLimit:0,event:"scroll",effect:"show",container:f,dataAttribute:"src",sourceMaker:null,skipInvisible:!0,appear:null,load:null,loadingClass:"",placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};o(v);var b=l.type||w.type,C=A.get(b);if("function"!=typeof C)throw"Error, cannot found the specific type loader (type: `"+b+"`)";"html"===b&&(w.placeholder=""),l&&t.extend(w,l);var E=w.container,z=w.event,I=0===z.indexOf("scroll"),k=E&&E!==f?t(E):a,R=function(e){var i=v._list;if(i.length>0){var r=0;n(i.slice(0),function(e,n){var i=t(n);if(!w.skipInvisible||i.is(":visible"))if(m(n,w)||_(n,w));else if(g(n,w)||y(n,w)){if(++r>w.failureLimit)return!1}else i.trigger("appear"),r=0})}else v.reset()},U=function(){v._list=i(v._list,function(t){return!t[s]})},B=function(){var e=this,n=t(e),i=n.attr("data-"+w.dataAttribute),r=w.sourceMaker,o=w.appear,f=w.loadingClass,a=e[s];a===c?(e[s]=p,f&&n.addClass(f),r&&(i=r(i,e)),o&&o.apply(v,[e,i]),C.call(v,e,i,w,function(t,r){if(!v._destroyed){if(f&&n.removeClass(f),t)setTimeout(function(){e[s]=c,v.emit("lazyItemError",e,i,t),e=null},300);else{e[s]=d,U(),v.emit("lazyItemReady",e,i,r);var o=w.load;o&&o.apply(v,[e,i,r]),e=null}n=null}})):a===d&&(U(),v.emit("lazyItemReady",e,i))},L=function(){this[s]||t(this).trigger("appear")},Q=function(e){var n=t(e);e[s]=c;var i=w.placeholder;if(i)if(n.is("img")){var r=n.attr("src");r||n.attr("src",i)}else"image"===v._.type||n.children()[0]||n.html(i);n.on("appear",B),I||n.on(z,L),v._list.push(e)},S=function(t){t=i(t||[],h),t.length&&(n(t,function(t,e){Q(e)}),v._inited||T(v))},T=function(e){if(!e._inited){var i=r(R,30);if(e._inited=!0,I&&k.on(z,i),a.on("resize",i),u){var o=function(i){i.originalEvent&&i.originalEvent.persisted&&n(e._list,function(e,n){t(n).trigger("appear")})};a.on("pageshow",o),e.once("reset",function(){a.off("pageshow",o)})}e.once("reset",function(){n(e._list,function(t,e){N(e)}),I&&k.off(z,i),a.off("resize",i)}),t(document).ready(R)}},N=function(e){var n=t(e);n.off("appear",B),I||n.off(z,L)};v.on("lazyItemReady",function(t){N(t)}),v.once("destroy",function(){S=null,R=null,U=null,B=null,L=null}),v._=w,v._list=[],v.add=function(e){var n=t(e);n.length>0&&S(n)},v.update=R,S(e)};v.prototype={constructor:v,update:function(){},peek:function(){var t=this._list,n=t.length;return n>0?t[0]:e},reset:function(){return this._inited?(this._inited=!1,this.emit("reset"),this._list.length=0,this):this},destroy:function(){this._destroyed||(this._destroyed=!0,this.reset().emit("destroy"),this.un(),this._=null)}},v.define=function(t,e){return A.define(t,e)};var g=function(e,n){var i,r=n.container;return i=r&&r!==f?t(r).offset().top+t(r).height():(f.innerHeight?f.innerHeight:a.height())+a.scrollTop(),i<=t(e).offset().top-n.threshold},y=function(e,n){var i,r=n.container;return i=r&&r!==f?t(r).offset().left+t(r).width():a.width()+a.scrollLeft(),i<=t(e).offset().left-n.threshold},m=function(e,n){var i,r=n.container;return i=r&&r!==f?t(r).offset().top:a.scrollTop(),i>=t(e).offset().top+n.threshold+t(e).height()},_=function(e,n){var i,r=n.container;return i=r&&r!==f?t(r).offset().left:a.scrollLeft(),i>=t(e).offset().left+n.threshold+t(e).width()},w=function(t,e){return!(y(t,e)||_(t,e)||g(t,e)||m(t,e))};return v.belowthefold=g,v.rightoffold=y,v.abovethetop=m,v.leftofbegin=_,v.inviewport=w,v});