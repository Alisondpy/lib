define(function(t,e,i){"use strict";var n=t("jquery"),l=0,o=function(t,e){if("object"==typeof t&&t.length>0&&(t=t[0]),!t)throw Error("Setup upload button failed. target element not valid");e=n.extend({name:"__uploadfile_"+ ++l,accept:"",multiple:!1,className:"ui-button-upload",onChange:function(){}},e);var i,o=n(t),a=e.className;"INPUT"===t.nodeName.toUpperCase()&&"file"===o.attr("type")?(i=o,o=o.wrap('<span class="'+a+'"></span>')):(i=n('<input type="file" />'),o.append(i).addClass(a)),i.addClass("upload-file-ctl"),o.css({position:"relative",overflow:"hidden",direction:"ltr"}),this.options=e,this._el=o,this._filectl=i,this._initFileCtl()};return n.extend(o.prototype,{_initFileCtl:function(){var t=this.options,e=this._filectl;this._el;n.each(["name","multiple","accept"],function(i,n){t.hasOwnProperty(n)&&e.prop(n,t[n])}),window.attachEvent&&e.attr("tabIndex","-1"),e.css({position:"absolute",top:0,left:0,width:"100%",height:"100%",fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),e.on("change",t.onChange)},reset:function(){var t=this.options.onChange,e=this._filectl,i=n(e[0].cloneNode(!1));e.off("change",t),e.replaceWith(i),this._filectl=i,this._initFileCtl()},destroy:function(){this._filectl.off(),this._filectl=null,this.el=null}}),o});