define(function(n,o,i){"use strict";var e,r=n("lib/ui/box/1.0.1/box"),t=n("lib/core/1.0.0/io/messenger"),l=function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i]);return n},c=n("./channel"),u="yunhou.com",s="https://ssl.yunhou.com/passport/loginMini",a=function(n,o,i,a){"function"==typeof n&&(a=i,i=o,o=n,n=null),e&&e.destroy(),n=l({url:s,width:380,height:440,fixed:!0,scrolling:"no",close:!1},n);var h=n.domain||u;try{document.domain=h}catch(n){setTimeout(function(){console.warn(n)},1)}e=r.loadUrl(n.url,n),a&&e.on("hide",function(){a()});var f=new t("channel/passport");return f.on("resizeBox",function(n){e.height(n.height)}),f.on("loginCallback",function(n){c.fire("login",n),o&&o(n),e.hide()}),f.on("loginErrorCallback",function(n){c.fire("error",n),i&&i(n)}),e.on("destroy",function(n){e=null,f.destroy()}),f.on("loginHide",function(n){e.hide()}),e};i.exports={showDialog:a}});