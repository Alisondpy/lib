define(function(n,t,e){"use strict";var i=window,r=Date.now||function(){return+new Date},a=i.requestAnimationFrame,o=i.cancelAnimationFrame;if(!a){for(var u,f=["webkit","moz","o","ms"],c=-1;u=f[++c],u&&!o;)a=i[u+"RequestAnimationFrame"],o=i[u+"CancelAnimationFrame"];if(!o){var m=0;a=function(n){var t=r(),e=Math.max(0,16-(t-m)),a=i.setTimeout(function(){n(t+e)},e);return m=t+e,a},o=function(n){clearTimeout(n)}}}var l=function(){var n,t=0,e=[],i=function(t){var i=e;for(e=[],n=null;i.length;)i.shift()[1](t)},r=function(r){var o=0;return"function"==typeof r&&(o=++t,e.push([o,r])),n||(n=a(i)),o},u=function(t){var i;if(i=e.length){for(;i--;)if(e[i][0]===t){e.splice(i,1);break}e.length||(o(n),n=null)}};return{next:r,cancel:u}}();e.exports=l});