define(function(n,e,t){"use strict";function i(n){return m("<"+n+"/>")[0]}function o(n,e,t){n.insertRule?n.insertRule(e+" {"+t+"}",0):n.addRule(e,t,1)}function a(){var n,e,t,i,o,u="";for(n=document.body||document.documentElement,t=n.style,i="Transition",o=["Moz","Webkit","Khtml","O","ms"],e=0;e<o.length;){if(void 0!==t[o[e]+i]){u=o[e];break}e++}return a=function(){return u},u}function u(){var n=a();return n?"-v-".replace("v",n.toLowerCase()):""}function r(n){return"number"==typeof n?n:{fast:200,normal:500,slow:1e3}[n]||500}function d(n,e,t,i,o){var a,u,d=m(n),s=arguments,o="boolean"==typeof s[s.length-1]&&s[s.length-1],p=!1,v=function(){h()},h=function(n){p||y(!0)},y=function(n){p||(p=!0,h=l,d.off(b,v),a&&(clearTimeout(a),a=null),d.removeClass(u),n&&i(),d=null)};return"function"==typeof t&&(i=t,t=void 0),i=i||l,c?(t=t||"normal",e=e||"shake",u=["ui-animated","ui-speed-"+t,"ui-ani-"+e].join(" "),d.on(b,v),a=setTimeout(v,r(t)+100),o===!0?f(function(){d.addClass(u)}):d.addClass(u)):f(function(){i&&i()}),{stop:function(){return y.apply(null,arguments),this}}}var m=n("jquery"),s=n("./util"),l=(s.each,s.noop),f=s.setImmediate,c=u(),p=/\-v\-/g,v=document.getElementsByTagName("head")[0].appendChild(i("style")),h=v.sheet||v.styleSheet,y={".ui-animated":"-v-animation-fill-mode: both;",".ui-animated.ui-speed-normal":"-v-animation-duration: 0.5s;",".ui-animated.ui-speed-fast":"-v-animation-duration: 0.2s;",".ui-animated.ui-speed-slow":"-v-animation-duration: 1s;"},b={"-webkit-":"webkitAnimationEnd","-moz-":"animationend","-o-":"OAnimationEnd","-ms-":"msAnimationEnd","":"animationend"}[c];s.each(y,function(n,e){n&&o(h,e,n.replace(p,c))}),e.effect=d,e.getVendorPrefix=a});