define(function(e){var t=e("jquery"),n=e("./dialog"),r=e("./drag");return n.oncreate=function(e){var n,o=e.options,a=o._,i=o.url,f=o.oniframeload;if(i&&(this.padding=o.padding=0,n=t("<iframe />"),n.attr({id:"j"+e.id,src:i,name:e.id,width:"100%",height:"100%",allowtransparency:"yes",frameborder:"no",scrolling:"no"}).on("load",function(){var r,a;try{a=n[0].contentWindow,r=t(a.document)}catch(e){}r&&r.length&&(o.width||e.width(r.width()),o.height||e.height(r.height())),f&&f.call(e),e.emit("load",a)}),e.addEventListener("beforeremove",function(){n.attr("src","about:blank").remove()},!1),e.content(n[0]),e.iframeNode=n[0]),!(a instanceof Object))for(var c=function(){e.close().remove()},d=0;d<frames.length;d++)try{if(a instanceof frames[d].Object){t(frames[d]).one("unload",c);break}}catch(e){}t(e.node).on(r.types.start,"[i=title]",function(t){e.follow||(e.focus(),r.create(e.node,t))})},n.get=function(e){if(e&&e.frameElement){var t,r=e.frameElement,o=n.list;for(var a in o)if(t=o[a],t.node.getElementsByTagName("iframe")[0]===r)return t}else if(e)return n.list[e]},n});