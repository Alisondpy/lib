define(function(e){"use strict";var t=e("jquery"),n=e("./dialog"),r=e("./drag"),o="position:absolute;left:-9999em;top:-9999em;border:0;background:transparent",i="border:0;display:block",a=function(e){var t=e.contentWindow;if(t)try{return t.document}catch(e){return 0}},f=function(e,n){return t(e).one("load",n)};return n.oncreate=function(e){var n=e.options,l=n.original,c=n.url;if(c){var d,s=e.$("content"),u=s.find("iframe");u.length||(u=t("<iframe />"),s.append(u)),d=u[0],u.attr({src:c,name:e.id,width:"100%",height:"100%",allowtransparency:"yes",frameborder:"no",scrolling:"no",style:o}),f(d,function(){s.find(".ui-dialog-loading, .ui-dialog-x-loading").fadeIn(function(){t(this).remove()}),u.attr("style",i);var r=a(d);r&&(r=t(r))&&(n.width||e.width(r.width()),n.height||e.height(r.height())),e.emit("load")}),e.on("beforeremove",function(){u.attr("src","about:blank").remove()},!1),e.iframeNode=d}if(!(l instanceof Object))for(var m=function(){e.close().remove()},g=0;g<frames.length;g++)try{if(l instanceof frames[g].Object){t(frames[g]).one("unload",m);break}}catch(e){}t(e.node).on(r.types.start,'[i="title"]',function(t){e.follow||(e.focus(),r.create(e.node,t))})},n.get=function(e){if(e&&e.frameElement){var t,r=e.frameElement,o=n.list;for(var i in o)if(t=o[i],t.node.getElementsByTagName("iframe")[0]===r)return t}else if(e)return n.list[e]},n});