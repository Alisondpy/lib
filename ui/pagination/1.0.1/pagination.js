!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):e.returnExports=t(jQuery)}(this,function(e){"use strict";var t="pagination",a=function(a,n){var i=e(a);if(i.data(t))throw"Please destroy the old pagination instance first.";this.pager=i,this.init(n)};return a.prototype={constructor:a,init:function(a){var n=e.extend({totalCount:1,pageSize:1,pageCount:0,displayedPages:3,edges:2,currentPage:1,hrefTextPrefix:"#p-",hrefTextSuffix:"",prevText:"上一页",nextText:"下一页",ellipseText:"&hellip;",className:"",labelMap:[],displayInfo:!1,selectOnClick:!0,async:!1,onPage:function(e,t){},onInit:function(){}},a||{}),i=this,r=i.pager;e.each(n,function(e,t){var a=n[t];"function"==typeof a&&(n[t]=function(){return a.apply(i,arguments)})}),n.pageCount=n.pageCount?n.pageCount:Math.ceil(n.totalCount/n.pageSize)?Math.ceil(n.totalCount/n.pageSize):1,n.currentPage=n.currentPage-1,n.halfDisplayed=n.displayedPages/2,r.addClass([n.className,"ui-pager"].join(" ")).data(t,n),i._draw(),i._initEvents(),n.onInit()},_initEvents:function(){var a=this,n=a.pager,i=a.data(),r=function(){var e,t,a=n.find(".page-no");return!!a.length&&(e=a.val(),t=parseInt(e,10),!e||isNaN(t)?(a.val(i.currentPage+1),!1):t)},s=function(e){if(!i.disabled){var t=r();t>0&&t<=i.pageCount&&t-1!==i.currentPage&&a._selectPage(t-1,e)}};n.on("click",".page-link",function(t){t.preventDefault();var n=+e(this).data("page-index");isNaN(n)||a._selectPage(n,t)}),i.displayInfo&&n.on("click",".page-no",function(e){this.select()}).on("keydown",".page-no",function(e){13===e.keyCode&&s()}).on("click",".page-info .ui-button",function(e){e.preventDefault(),s()}),n.one("pagination.destroy",function(){n.undelegate(".page-link","click").undelegate(".page-no","click keydown").undelegate(".page-info .ui-button","click").removeData(t),i=null,n=null,a.pager=null})},data:function(e,a){var n=this.pager.data(t);return e?void 0===a?n[e]:n[e]=a:n},get:function(e){var t=e?this.data(e):null;return e&&"currentPage"===e?t+1:t},getCurrentPage:function(){return this.data().currentPage+1},selectPage:function(e){return this._selectPage(e-1)},prevPage:function(){var e=this.data();return e.currentPage>0&&this._selectPage(e.currentPage-1),this},nextPage:function(){var e=this.data();return e.currentPage<e.pageCount-1&&this._selectPage(e.currentPage+1),this},destroy:function(){this.pager.empty().trigger("pagination.destroy")},drawPage:function(e){var t=this.data();return t.currentPage=e-1,this._draw(),this},redraw:function(){this._draw()},disable:function(){var e=this.data();return e.disabled=!0,this._draw(),this},enable:function(){var e=this.data();return e.disabled=!1,this._draw(),this},show:function(){var e=this,t=e.pager;t.show()},hide:function(){var e=this,t=e.pager;t.hide()},setTotalCount:function(e,t){var a=this.data();a.totalCount=e,a.pageCount=this._getPages(a),t||this._draw()},setPageSize:function(e){var t=this.data();return t.pageSize=e,t.pageCount=this._getPages(t),this._selectPage(0),this},_wraper:function(t){var a=this.pager,n="UL"===a[0].tagName.toUpperCase()?a:a.find("ul");return!n.length&&t?e("<ul></ul>").appendTo(a):n},_draw:function(){var e,t=this.data(),a=this._getInterval(t),n=this.pager;n.empty();var i=this._wraper(!0);if(t.disabled&&i.addClass("disabled"),t.prevText&&this._appendItem(t.currentPage-1,{text:t.prevText,classes:"prev"}),a.start>0&&t.edges>0){var r=Math.min(t.edges,a.start);for(e=0;e<r;e++)this._appendItem(e);t.edges<a.start&&a.start-t.edges!=1?i.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):a.start-t.edges==1&&this._appendItem(t.edges)}for(e=a.start;e<a.end;e++)this._appendItem(e);if(a.end<t.pageCount&&t.edges>0){t.pageCount-t.edges>a.end&&t.pageCount-t.edges-a.end!=1?i.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):t.pageCount-t.edges-a.end==1&&this._appendItem(a.end++);var s=Math.max(t.pageCount-t.edges,a.end);for(e=s;e<t.pageCount;e++)this._appendItem(e)}t.nextText&&this._appendItem(t.currentPage+1,{text:t.nextText,classes:"next"}),t.displayInfo&&this._renderPI()},_getPages:function(e){var t=Math.ceil(e.totalCount/e.pageSize);return t||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pageCount-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pageCount):Math.min(e.displayedPages,e.pageCount))}},_appendItem:function(t,a){var n,i,r=this,s=(r.pager,r.data()),l=e("<li></li>"),d=r._wraper();t=t<0?0:t<s.pageCount?t:s.pageCount-1,n={text:t+1,classes:""},s.labelMap.length&&s.labelMap[t]&&(n.text=s.labelMap[t]),n=e.extend(n,a||{}),t===s.currentPage||s.disabled?(s.disabled?l.addClass("disabled"):l.addClass("active"),i=e('<span class="current">'+n.text+"</span>")):i=e('<a href="'+s.hrefTextPrefix+(t+1)+s.hrefTextSuffix+'" data-page-index="'+t+'" class="page-link">'+n.text+"</a>"),n.classes&&i.addClass(n.classes),l.append(i),d.append(l)},_selectPage:function(e,t){var a=this,n=a.data(),i=function(e,t){n.currentPage=e,n.selectOnClick&&a._draw(),n.onPage(e+1,t)};if("function"==typeof n.async){var r=n.async({pageSize:n.pageSize,currentPage:e+1});if(r&&r.then)return n.lock?a:(n.lock=1,r.then(function(n){var r=(n||0).totalCount;return void 0!==r&&a.setTotalCount(r,!0),i(e,t),a}).always(function(){n.lock=0,n=void 0,i=void 0}));throw"Error: Please make sure that the `async` returns is a Deferred's promise"}return i(e),a},_renderPI:function(){var t,a=this,n=(a.pager,a.data()),i=n.currentPage+1,r=n.pageCount,s=e('<li class="page-info"></li>'),l=a._wraper();i=i<1?1:Math.min(i,r),t="共"+n.pageCount+'页，跳转到第<input type="text" class="page-no" autocomplete="off" value="'+i+'">页<a class="ui-button" href="javascript:;">跳转</a>',n.disabled&&s.addClass("disabled"),s.html(t),l.append(s)}},a});